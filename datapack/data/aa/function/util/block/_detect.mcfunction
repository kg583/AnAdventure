# Check current layer
$execute positioned ^-2 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^-2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^-1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^-1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^-.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^ ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^1 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^1.5 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

$execute positioned ^-2 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1.5 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-1 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^-.5 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^ ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^.5 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^1.5 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io
$execute positioned ^2 ^2 ^ align xyz positioned ~.5 ~ ~.5 if block ~ ~ ~ $(block) unless entity @e[type=minecraft:marker,tag=aa.block,distance=..0.5] run return run function aa:util/return with storage aa:io

# Advance
scoreboard players remove .dist aa.local 1
execute if score .dist aa.local matches 0.. store success score .success aa.local positioned ^ ^ ^0.5 run return run function aa:util/block/_detect with storage aa:io

return fail
